#VKgetFriendsReport
##Инструкция по запуску
Для запуска скрипта потребуется склонировать репозиторий на ваш локальный компьютер одним из методов:

- git clone https://github.com/Oleggg2000/VKgetFriendsReport.git
- Кнопкой Download ZIP через выпадающее меню Code.

Далее нужно создать виртуальное окружение с помощью модуля virtualenv:

- Если у вас не установлен модуль virtualenv, то выполните команду <strong>pip install virtualenv</strong>.
- Следующим шагом выполнить команду <strong>python3 -m venv my_venv</strong>, где параметр my_venv - это
 папка для установки зависимостей.
- Теперь активируем виртуальное пространство команой: <strong>my_venv\Scripts\activate.bat</strong> - для Windows и 
<strong>source my_venv/bin/activate</strong> - для Linux.

Если удалось активировать виртуальное пространство, то вы увидите в консоли название вашего окружения в скобочках 
Например: **(my_venv) root@purplegate:/**

Затем нужно установить все зависимости для работы скрипта одним из методов:

- Выполнить команду <strong>pip install module1 module2 ....</strong>, где module - это назваие модулей, которые можно 
найти в файле requirements.txt
- Либо выполнить установку с помощью файла requirement.txt с помощью команды 
<strong>pip install -r requirements.txt</strong>

После выполнения всех действий скрипт можно запускать как с помощью консоли с параметрами или без, так и с помощью
средств IDE.

##Описание работы скрипта
###API енд-поинт
В моей программе используется только один енд-поинт для метода GET протокола HTTP это 
*https://api.vk.com/method/friends.get?v=5.131&fields=country,city,bdate,sex&order=name&access_token={access_token}
&user_id={user_id}*, где access_token - это токен доступа к API и user_id - это id пользователя, для 
которого плучаем запрос. Если user_id не указан, то берется по умолчанию айди, использованный для создания токена.

Параметры метода friends.get:
- v - 5.131 это актуальная версия API на момент написание скрипта
- user_id - идентификатор пользователя, для которого необходимо получить список друзей. Если параметр не задан, то 
считается, что он равен идентификатору текущего пользователя (справедливо для вызова с передачей access_token).
Целое число.
- order - порядок, в котором нужно вернуть список друзей. Допустимые значения: hints — сортировать по рейтингу, 
аналогично тому, как друзья сортируются в разделе Мои друзья (Это значение доступно только для Standalone-приложений 
с ключом доступа, полученным по схеме Implicit Flow.).
random — возвращает друзей в случайном порядке. name — сортировать по имени. Данный тип сортировки работает медленно, 
так как сервер будет получать всех друзей а не только указанное количество count. 
(работает только при переданном параметре fields). По умолчанию список сортируется в порядке возрастания идентификаторов пользователей.
Строка.
- count - количество друзей, которое нужно вернуть. Положительное число, по умолчанию 5000.
- fields - список дополнительных полей, которые необходимо вернуть.
Доступные значения: nickname, domain, sex, bdate, city, country, timezone, photo_50, photo_100, photo_200_orig, 
has_mobile, contacts, education, online, relation, last_seen, status, can_write_private_message, can_see_all_posts, 
can_post, universities Список слов, разделенных через запятую.
- access_token - это токен доступа к API.
- user_id - это id пользователя, для которого запрашиваем метод.

Больше информации можно узнать по ссылке: https://vk.com/dev/friends.get
###Функции:
В программе присутствует три функции:

- friends_report - главная функция, которая по сути является точкой входа в программу. Функция принимает такие 
аргументы, как access_token - это токен доступа к API, user_id - это id пользователя, для которого формируем отчет, 
outcomes_format - формат предоставления отчета (значение по умолчанию csv) и outcomes_path - это путь к файлу и его имя
(по умолчанию сохраняется в корневую директорию проекта с названием report).
- csv_tsv_reports - Функция, которая создает отчеты в фортатах csv и tsv. Функция принимает такие 
аргументы, как res_ - это GET метод протокола HTTP, который несес в себе информацию по API энд-поинту,
format_ - cvs или tsv форматы и path_ - путь, где создать файл и его название.
- json_report - Функция, которая создает отчет в фортате json. Функция принимает такие 
аргументы, как res_ - это GET метод протокола HTTP, который несес в себе информацию по API энд-поинту и
path_ - путь, где создать файл и его название.

###Дополнительно реализовано
Также в коде реализована пагинация, так как друзей может быть много, они могут не влезть на одну страницу, и
тогда отчет будет неполным. Для этого созданы две константы CSV_TSV_PAGINATION_NUM и JSON_PAGINATION_NUM, которые и 
разделяют данные в разлияные файлы по их количесву.

В системе присутстуют логи, по которым можно отследить состояние системы во время
выполнения. Все логи находятся в файле logs.log данного репозитория. Этот файл не перезаписывается, а дополняется при 
каждом запуске программы.